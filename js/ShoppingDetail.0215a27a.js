(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ShoppingDetail"],{2192:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid pt-3 pt-md-5 mt-3 pb-5"},[a("HistoryBackButton",{attrs:{"last-path":{path:t.path}}}),null!==t.track_id?a("div",{staticClass:"modal slide-fade p-0 align-items-center justify-content-center",attrs:{id:"MusicModal",tabindex:"-1",role:"dialog","aria-labelledby":"MusicModalTitle","aria-hidden":"true","data-backdrop":"static"}},[a("div",{staticClass:"modal-dialog modal-dialog-center m-0 w-100 m-md-auto ",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("button",{staticClass:"close position-absolute align-self-end pt-2 pr-3",attrs:{type:"button"}},[a("span",{staticClass:"display-4",attrs:{"aria-hidden":"true"},on:{click:t.closeTrack}},[t._v("×")])]),a("TrackIframe",{attrs:{"track-id":t.track_id}})],1)])]):t._e(),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-5 justify-content-center"},[a("div",{staticClass:"col-md-5 mr-5"},[a("div",{staticClass:"d-none d-md-flex"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:t.product.title}})])]),a("div",{staticClass:"col-md-5"},[t.product.category?[a("div",[a("ul",{staticClass:"pl-0 mb-4"},[a("li",{staticClass:"text-secondary d-flex align-items-center mb-1"},[a("router-link",{staticClass:"text-secondary",attrs:{to:{name:"shopping_List",params:{category:"all",page:1}}}},[t._v("\n                  All\n                ")]),t._v(" \n                /\n                 \n                "),a("router-link",{staticClass:"text-secondary",attrs:{to:{name:"shopping_List",params:{category:t.product.category,page:1}}}},[t._v("\n                  "+t._s(t.product.category)+"\n                ")])],1),a("li",[a("div",{staticClass:"h-100 w-100 d-flex d-md-none my-3"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:t.product.title}})])]),a("li",{staticClass:"text-dark mb-3"},[a("h1",{staticClass:"h2 font-weight-bold text-secondary"},[t._v("\n                  "+t._s(t.album)+"\n                ")]),t._m(0)]),t._m(1),t.product.price?a("li",{staticClass:"my-3 border-bottom pb-3"},[a("del",{staticClass:"text-secondary h4 font-weight-light mr-4"},[t._v("NT$"+t._s(t.product.origin_price))]),a("span",{staticClass:"text-success h4"},[t._v("NT$"+t._s(t.product.price))])]):t._e(),a("li",{staticClass:"text-muted mt-3 small"},[t._v("\n                藝人\n              ")]),a("li",{staticClass:"text-secondary"},[t._v("\n                "+t._s(t.singer)+"\n              ")]),a("li",{staticClass:"text-muted mt-3 small"},[t._v("\n                發行月份\n              ")]),a("li",{staticClass:"text-secondary"},[t._v("\n                "+t._s(t.product.description)+"\n              ")])])])]:t._e(),a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control form-control-lg rounded-0",attrs:{id:"",name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"num",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"null",selected:"",disabled:""}},[t._v("\n            請選擇數量\n          ")]),t._l(10,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v("\n            "+t._s(e)+t._s(t.product.unit)+"\n          ")])}))],2),a("i",{staticClass:"material-icons material-icons-middle"},[t._v("keyboard_arrow_down")]),a("div",{staticClass:"d-flex mt-4 mb-2"},[a("CustomButton",{staticClass:"mr-3 w-50",attrs:{"custom-class":"btn-outline-dark",text:"專輯試聽"},nativeOn:{click:function(e){return t.openTrack(e)}}}),a("AddToCartButton",{staticClass:"w-50",nativeOn:{click:function(e){return t.addToCart(t.product.id,t.product.num)}}})],1),a("small",{staticClass:"text-secondary"},[t._v("※本產品適用折價券")])],2)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3 mb-5"},[a("TabList",{attrs:{product:t.product,tracks:t.tracks,singer:t.singer}})],1)])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("small",{staticClass:"text-success pb-1 d-flex justify-content-center align-items-center border border-success p-1",staticStyle:{width:"80px"}},[a("span",{staticClass:"font-weight-bold"},[t._v("全館免運")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"text-secondary border-bottom mt-4 mt-md-5 h6 pb-2 d-flex align-items-start"},[a("span",{staticClass:"font-weight-bold"},[t._v("建議售價")])])}],i=(a("28a5"),a("96cf"),a("3b8d")),r=a("4ec3"),c=a("2cc0"),l=a("70e0"),o=a("5d72"),d=a("62e1"),u=a("247c"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("iframe",{ref:"iframe",staticClass:"d-block",attrs:{id:"iframeID",src:"https://widget.kkbox.com/v1/?id="+t.trackId+"&type=album&terr=TW&lang=TC&autoplay=false",frameborder:"0",allow:"autoplay",width:"100%"}})])},p=[],h={name:"TrackIframe",props:{trackId:{type:String,required:!0}},data:function(){return{}}},f=h,b=a("2877"),v=Object(b["a"])(f,m,p,!1,null,null,null),_=v.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tablists"},[t._m(0),a("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"home",role:"tabpanel","aria-labelledby":"home-tab"}},[a("div",{staticClass:"my-3 p-3"},[t.product.content?a("p",{staticClass:"card-text text-secondary text-justify h7"},[t._v("\n          "+t._s(t.product.content)+"\n        ")]):t._e()])]),a("div",{staticClass:"tab-pane fade",attrs:{id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"}},[a("table",{staticClass:"table mt-3"},[t._m(1),t.tracks?a("tbody",t._l(t.tracks,(function(e,s){return a("tr",{key:e.name,staticClass:"text-secondary"},[a("th",{staticClass:"align-middle text-secondary",attrs:{scope:"row"}},[a("p",{staticClass:"mb-0"},[t._v("\n                "+t._s(s+1)+"\n              ")])]),a("td",{staticClass:"align-middle text-secondary"},[a("p",{staticClass:"mb-0"},[t._v("\n                "+t._s(e.name)+"\n              ")])]),a("td",{staticClass:"text-secondary text-center"},[a("div",{staticClass:"d-none d-md-flex text-center text-secondary"},[a("p",{staticClass:"mb-0"},[t._v("\n                  "+t._s(t.singer)+"\n                ")])])]),a("td",{staticClass:"align-middle text-center text-secondary"},[a("p",{staticClass:"mb-0"},[t._v("\n                "+t._s(t._f("trackDuration")(e.duration))+"\n              ")])])])})),0):t._e()])]),t._m(2)])])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active text-secondary",attrs:{id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true"}},[t._v("介紹")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link text-secondary",attrs:{id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false"}},[t._v("曲目")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link text-secondary",attrs:{id:"contact-tab","data-toggle":"tab",href:"#contact",role:"tab","aria-controls":"contact","aria-selected":"false"}},[t._v("購物說明")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-secondary"},[a("th",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v("\n              #\n            ")]),a("th",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v("\n              曲目\n            ")]),a("th",{staticClass:"border-top-0 text-center",attrs:{scope:"col"}},[a("div",{staticClass:"d-none d-md-flex text-center"},[t._v("\n                藝人\n              ")])]),a("th",{staticClass:"border-top-0 text-center",attrs:{scope:"col"}},[a("i",{staticClass:"material-icons align-middle"},[t._v("access_time")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-pane fade",attrs:{id:"contact",role:"tabpanel","aria-labelledby":"contact-tab"}},[a("div",{staticClass:"my-3 p-3"},[a("p",{staticClass:"card-text text-secondary h7"},[t._v("\n          使用電腦播放程式請留意：CD曲目的編排是否正確，將視您所使用之播放程式其串連的媒體資料庫所提供的資訊而定。若播放程式所顯示的專輯資訊內容與實際商品有出入，此非商品本身問題，請您可手動更新程式或向程式管理人員反應。\n        ")]),a("p",{staticClass:"card-text text-secondary h7"},[t._v("\n          限量商品購買提醒：因數量有限，若庫存不足時，將無法提供換貨，敬請包涵見諒。\n        ")])])])}],x=(a("a481"),{name:"TabList",props:{singer:{type:String,required:!0},tracks:{type:Array,required:!0},product:{type:Object,required:!0}},computed:{content:function(){var t=this.product.content;return t.replace(/\r?\n/g,"<br/>")}}}),y=x,k=Object(b["a"])(y,g,C,!1,null,null,null),w=k.exports,T=a("1157"),E=a.n(T),$={name:"ShoppingDetail",components:{TrackIframe:_,AddToCartButton:o["a"],CustomButton:d["a"],HistoryBackButton:u["a"],TabList:w},data:function(){return{product:{},singer:"",album:"",tracks:[],album_id:"",track_id:null,isOpen:!1,path:"",breakPoint:768,clientWidth:null,clientHeight:null}},computed:{kkbox_token:function(){return this.$store.getters["kkbox/kkbox_token"]},config:function(){var t={headers:{Authorization:"".concat(this.kkbox_token)}};return t}},created:function(){this.getProduct()},mounted:function(){this.$nextTick((function(){window.addEventListener("resize",this.getClientWidth),this.getClientWidth()}))},destroyed:function(){window.removeEventListener("resize",this.resizeIframeHeight),window.removeEventListener("resize",this.getClientWidth)},methods:{getClientWidth:function(){var t=document;this.clientWidth=document.body.clientWidth,this.clientWidth>=this.breakPoint?this.clientHeight=t.documentElement.clientHeight-200:this.clientHeight=t.documentElement.clientHeight},getToken:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("kkbox/GET_KKBOX_TOKEN");case 2:return t.next=4,this.searchAlbum();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getProduct:function(){var t=this,e=this.$route.params.id;this.$store.commit("loading/loading_status",!0),Object(r["p"])(e).then((function(e){e.data.success?(t.product=e.data.product?e.data.product:{},t.product.num=1,t.singer=t.product.title?t.product.title.trim().split("/")[0]:"",t.album=t.product.title?t.product.title.trim().split("/")[1]:"",t.$store.commit("loading/loading_status",!1),t.getToken()):l["a"].emitHandler(!1,e.data.message)})).catch((function(t){(t||t instanceof ReferenceError)&&l["a"].emitHandler(!1,"取得資料錯誤")}))},addToCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("cart/ADD_TO_CART",{id:t,qty:e})},searchAlbum:function(){var t=this;Object(c["c"])(this.config,this.album).then((function(e){e.data?(t.album_id=e.data.albums.data[0].id,t.searchTracks()):l["a"].emitHandler(!1,"取得資料錯誤")})).catch((function(t){(t||t instanceof ReferenceError)&&l["a"].emitHandler(!1,"取得資料錯誤")}))},searchTracks:function(){var t=this;""!==this.album_id&&Object(c["d"])(this.config,this.album_id).then((function(e){e.data&&(t.tracks=e.data.data?e.data.data:[])})).catch((function(t){(t||t instanceof ReferenceError)&&l["a"].emitHandler(!1,"取得資料錯誤")}))},openTrack:function(){var t=this;this.isOpen&&setTimeout((function(){t.isOpen=!t.isOpen}),1e3),setTimeout((function(){t.track_id=t.album_id}),1500),setTimeout((function(){t.resizeIframeHeight(),E()("#MusicModal").modal("show")}),2e3)},closeTrack:function(t){E()("#MusicModal").modal("hide"),this.track_id=null},resizeIframeHeight:function(){var t=document.querySelector("#iframeID");t.height=t?this.clientHeight+"px":null}},beforeRouteEnter:function(t,e,a){a((function(t){t.path=e.path}))}},O=$,j=Object(b["a"])(O,s,n,!1,null,null,null);e["default"]=j.exports},"247c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-link",{staticClass:"btn btn-dark history-back-btn px-3 rounded-0 d-flex d-md-none",attrs:{to:t.lastPath}})],1)},n=[],i={name:"HistoryBackButton",props:{lastPath:{type:Object,required:!0}}},r=i,c=a("2877"),l=Object(c["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},"28a5":function(t,e,a){"use strict";var s=a("aae3"),n=a("cb7c"),i=a("ebd6"),r=a("0390"),c=a("9def"),l=a("5f1b"),o=a("520a"),d=a("79e5"),u=Math.min,m=[].push,p="split",h="length",f="lastIndex",b=4294967295,v=!d((function(){RegExp(b,"y")}));a("214f")("split",2,(function(t,e,a,d){var _;return _="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!s(t))return a.call(n,t,e);var i,r,c,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,p=void 0===e?b:e>>>0,v=new RegExp(t.source,d+"g");while(i=o.call(v,n)){if(r=v[f],r>u&&(l.push(n.slice(u,i.index)),i[h]>1&&i.index<n[h]&&m.apply(l,i.slice(1)),c=i[0][h],u=r,l[h]>=p))break;v[f]===i.index&&v[f]++}return u===n[h]?!c&&v.test("")||l.push(""):l.push(n.slice(u)),l[h]>p?l.slice(0,p):l}:"0"[p](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,s){var n=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,n,s):_.call(String(n),a,s)},function(t,e){var s=d(_,t,this,e,_!==a);if(s.done)return s.value;var o=n(t),m=String(this),p=i(o,RegExp),h=o.unicode,f=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(v?"y":"g"),g=new p(v?o:"^(?:"+o.source+")",f),C=void 0===e?b:e>>>0;if(0===C)return[];if(0===m.length)return null===l(g,m)?[m]:[];var x=0,y=0,k=[];while(y<m.length){g.lastIndex=v?y:0;var w,T=l(g,v?m:m.slice(y));if(null===T||(w=u(c(g.lastIndex+(v?0:y)),m.length))===x)y=r(m,y,h);else{if(k.push(m.slice(x,y)),k.length===C)return k;for(var E=1;E<=T.length-1;E++)if(k.push(T[E]),k.length===C)return k;y=x=w}}return k.push(m.slice(x)),k}]}))},"5d72":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-success btn-block py-3 mt-0 align-items-center justify-content-center rounded-0"},[a("span",{staticClass:"font-weight-bold"},[t._v("加入購物")])])}],i={name:"AddToCartButton"},r=i,c=a("2877"),l=Object(c["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},"62e1":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-block py-3 mt-0 font-weight-bold rounded-0",class:t.customClass},[t._v("\n  "+t._s(t.text)+"\n")])},n=[],i={name:"CustomButton",props:{text:{type:String,required:!0},customClass:{type:String,required:!0}}},r=i,c=a("2877"),l=Object(c["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=ShoppingDetail.0215a27a.js.map