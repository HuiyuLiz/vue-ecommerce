(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Checkout"],{"05ae":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row justify-content-center mb-3"},t._l(t.progress,(function(s,a){return e("div",{key:a,staticClass:"col-md-3"},[e("div",{staticClass:"alert border text-secondary d-none d-md-flex justify-content-center",class:{"d-flex alert-secondary":t.step===a},attrs:{role:"alert"}},[t._v("\n      "+t._s(s)+"\n    ")])])})),0)},r=[],n=(e("c5f6"),{name:"CartProgress",props:{step:{type:Number,required:!0}},data:function(){return{progress:["1. 確認商品","2. 填寫資料","3. 完成訂購"]}},computed:{},watch:{step:function(t,s){t!==s&&this.scrollToTop()}},methods:{scrollToTop:function(){window.scrollTo(0,0)}}}),c=n,o=e("2877"),i=Object(o["a"])(c,a,r,!1,null,null,null);s["a"]=i.exports},"62e1":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"btn btn-block py-3 mt-0 font-weight-bold rounded-0",class:t.customClass},[t._v("\n  "+t._s(t.text)+"\n")])},r=[],n={name:"CustomButton",props:{text:{type:String,required:!0},customClass:{type:String,required:!0}}},c=n,o=e("2877"),i=Object(o["a"])(c,a,r,!1,null,null,null);s["a"]=i.exports},"8d8b":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container pt-3 pt-md-5 mt-5 pb-5"},[e("div",{ref:"isCheck"}),e("CartProgress",{attrs:{step:t.step}}),t.order.is_paid?e("div",{staticClass:"container  mb-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-9 m-auto px-0 d-flex flex-column justify-content-center align-items-center px-3 p-md-0 checkout-banner"},[t._v("\n        >\n        "),t._m(0),e("router-link",{staticClass:"btn btn-light btn-block mt-3 py-3 rounded-0  btn-max-width font-weight-bold mt-4",attrs:{to:{name:"shopping_List",params:{category:"Top Hits",page:1}}}},[t._v("\n          更多資訊\n        ")])],1)])]):t._e(),e("div",{staticClass:"container"},[null!==t.order?e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-md-9 m-auto px-0"},[e("form",{staticClass:"m-auto",on:{submit:function(s){return s.preventDefault(),t.checkoutOrder(s)}}},[e("div",{staticClass:"accordion",attrs:{id:"accordion"}},[e("div",{staticClass:"card"},[t._m(1),e("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordion"}},[t.order.products?e("div",{staticClass:"card-body px-0"},[null!==t.order?e("CheckListItem",{attrs:{carts:t.order.products,cart:t.order}}):t._e()],1):t._e()])]),e("div",{staticClass:"card card border-0"},[t._m(2),e("div",{staticClass:"show",attrs:{id:"collapseTwo","aria-labelledby":"headingTwo","data-parent":"#accordion"}},[null!==t.user?e("div",{staticClass:"card-body px-0"},[e("table",{staticClass:"table"},[e("tbody",{staticClass:"text-secondary"},[e("tr",[e("th",{staticClass:"font-weight-normal",attrs:{scope:"row"}},[t._v("\n                          Email\n                        ")]),e("td",{attrs:{colspan:"3"}},[t._v("\n                          "+t._s(t.user.email)+"\n                        ")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("\n                          姓名\n                        ")]),e("td",{attrs:{colspan:"3"}},[t._v("\n                          "+t._s(t.user.name)+"\n                        ")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("\n                          收件人電話\n                        ")]),e("td",{attrs:{colspan:"3"}},[t._v("\n                          "+t._s(t.user.tel)+"\n                        ")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("\n                          收件人地址\n                        ")]),e("td",{attrs:{colspan:"3"}},[t._v("\n                          "+t._s(t.user.address)+"\n                        ")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("\n                          訂單編號\n                        ")]),null!==t.order?e("td",{staticClass:"text-secondary",attrs:{colspan:"3"}},[t._v("\n                          "+t._s(t.order.is_paid?t.orderId:"尚未成立訂單")+"\n                        ")]):t._e()]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("\n                          付款狀態\n                        ")]),null!==t.order?e("td",{class:{"text-danger":!t.order.is_paid,"text-success":t.order.is_paid},attrs:{colspan:"3"}},[t._v("\n                          "+t._s(t.order.is_paid?" 親愛的顧客您好，已付款完成，感謝訂購。":"尚未付款")+"\n                        ")]):t._e()])])])]):t._e()])])]),null!==t.order?e("div",{staticClass:"text-right mt-3 mb-5"},[e("div",{staticClass:"d-flex justify-content-between  mb-5"},[e("router-link",{staticClass:"btn btn-secondary  py-3 rounded-0  w-25 w-sm-40 ",attrs:{to:{name:"shopping_List",params:{category:"all",page:1}}}},[t._v("\n                繼續購物\n              ")]),t.order.is_paid?e("CustomButton",{staticClass:" w-25 w-sm-40",attrs:{"custom-class":"btn-success",text:"訂單完成",disabled:t.order.is_paid}}):e("CustomButton",{staticClass:" w-25 w-sm-40",attrs:{"custom-class":"btn-danger",text:"確認付款"}})],1)]):t._e()])])]):t._e()])],1)},r=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("h1",{staticClass:"text-white text-center"},[e("h3",{staticClass:"h2 mb-0"},[t._v("\n            找音樂嗎？\n          ")]),e("span",{staticClass:"h4"},[t._v("一起聆聽最新的流行歌曲!")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[e("div",{staticClass:"mb-0"},[e("a",{attrs:{"data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[e("div",{staticClass:"d-flex align-items-center text-secondary"},[t._v("\n                      購物車明細\n                      "),e("i",{staticClass:"material-icons"},[t._v("arrow_drop_down")])])])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"card-header",attrs:{id:"headingTwo"}},[e("div",{staticClass:"mb-0"},[e("a",{staticClass:"text-secondary collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}},[e("div",{staticClass:"d-flex align-items-center text-secondary"},[t._v("\n                      取貨人資訊\n                      "),e("i",{staticClass:"material-icons"},[t._v("arrow_drop_down")])])])])])}],n=e("4ec3"),c=e("70e0"),o=e("05ae"),i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.carts,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"align-middle",attrs:{colspan:"3"}},[e("div",{staticClass:"d-flex text-left align-items-center"},[e("div",{staticClass:"col-4 col-md-3 px-0 px-md-3"},[e("img",{staticClass:"img-fluid",attrs:{src:s.product.imageUrl,alt:""}})]),e("div",{staticClass:"col-8 col-md-8 d-flex flex-column pr-0"},[e("small",{staticClass:"mb-1 mb-md-3 text-secondary"},[t._v(t._s(s.product.title.trim().split("/")[0]))]),e("span",{staticClass:"h6 mb-0 text-secondary"},[t._v(t._s(s.product.title.trim().split("/")[1]))]),s.coupon?e("div",{staticClass:"small mt-3 text-success"},[t._v("\n                已符合折扣活動\n              ")]):t._e()])])]),e("td",{staticClass:"align-middle text-secondary",staticStyle:{width:"20%"}},[t._v("\n          "+t._s(s.qty)+t._s(s.product.unit)+"\n        ")]),e("td",{staticClass:"align-middle text-secondary text-right"},[e("div",{staticClass:"d-flex flex-column"},[e("span",[t._v(t._s(t._f("currency")(s.final_total)))]),e("del",{staticClass:"text-muted"},[t._v(t._s(t._f("currency")(s.product.origin_price*s.qty)))])])])])})),0),e("tfoot",{},[t._m(1),t.cart.final_total!==t.cart.total?e("tr",[e("td",{staticClass:"text-right text-danger font-weight-bold",attrs:{colspan:"4"}},[t._v("\n          總計\n        ")]),e("td",{staticClass:"text-right text-danger font-weight-bold"},[t._v("\n          "+t._s(t._f("currency")(t.cart.total))+"\n        ")])]):t._e()])])])},l=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{staticClass:"text-secondary text-left pl-md-4",attrs:{scope:"col ",colspan:"3"}},[t._v("\n          產品\n        ")]),e("th",{staticClass:"text-secondary",attrs:{scope:"col"}},[t._v("\n          數量\n        ")]),e("th",{staticClass:"text-secondary text-right",attrs:{scope:"col"}},[t._v("\n          價格\n        ")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("td",{staticClass:"text-right border-0 text-secondary",attrs:{colspan:"4"}},[t._v("\n          運費小計\n        ")]),e("td",{staticClass:"text-right border-0 text-secondary"},[t._v("\n          $0\n        ")])])}],d={name:"CheckListItem",props:{carts:{type:Object,required:!0},cart:{type:Object,required:!0}}},u=d,p=e("2877"),m=Object(p["a"])(u,i,l,!1,null,null,null),_=m.exports,v=e("62e1"),h={neme:"checkout",components:{CartProgress:o["a"],CheckListItem:_,CustomButton:v["a"]},data:function(){return{order:{},user:{},orderId:"",step:2,isOpen:!0}},created:function(){this.orderId=this.$route.params.orderId,this.getOrderList()},methods:{scrollToTop:function(){var t=this.$refs.isCheck;t&&setTimeout((function(){t.scrollIntoView({behavior:"smooth",block:"nearest"})}),2500)},getOrderList:function(){var t=this;this.$store.commit("loading/loading_status",!0),Object(n["n"])(this.orderId).then((function(s){s.data.success?(t.order=s.data?s.data.order:null,t.user=s.data.order?s.data.order.user:null,t.$store.commit("loading/loading_status",!1),t.order.is_paid&&t.scrollToTop()):c["a"].emitHandler(!1,"取得訂單失敗")}))},checkoutOrder:function(){var t=this;this.$store.commit("loading/loading_status",!0),Object(n["c"])(this.order.id).then((function(s){s.data.success?(t.$store.commit("loading/loading_status",!1),t.getOrderList(),c["a"].emitHandler(!0,s.data.message)):c["a"].emitHandler(!1,"取得訂單失敗")})).catch((function(t){(t||t instanceof ReferenceError)&&c["a"].emitHandler(!1,"取得資料錯誤")}))}}},C=h,f=Object(p["a"])(C,a,r,!1,null,null,null);s["default"]=f.exports}}]);
//# sourceMappingURL=Checkout.38e14daa.js.map