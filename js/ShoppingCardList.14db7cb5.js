(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ShoppingCardList"],{"28a5":function(t,e,a){"use strict";var n=a("aae3"),s=a("cb7c"),i=a("ebd6"),r=a("0390"),l=a("9def"),c=a("5f1b"),o=a("520a"),d=a("79e5"),u=Math.min,m=[].push,p="split",g="length",f="lastIndex",h=4294967295,v=!d((function(){RegExp(h,"y")}));a("214f")("split",2,(function(t,e,a,d){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[g]||2!="ab"[p](/(?:ab)*/)[g]||4!="."[p](/(.?)(.?)/)[g]||"."[p](/()()/)[g]>1||""[p](/.?/)[g]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!n(t))return a.call(s,t,e);var i,r,l,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,p=void 0===e?h:e>>>0,v=new RegExp(t.source,d+"g");while(i=o.call(v,s)){if(r=v[f],r>u&&(c.push(s.slice(u,i.index)),i[g]>1&&i.index<s[g]&&m.apply(c,i.slice(1)),l=i[0][g],u=r,c[g]>=p))break;v[f]===i.index&&v[f]++}return u===s[g]?!l&&v.test("")||c.push(""):c.push(s.slice(u)),c[g]>p?c.slice(0,p):c}:"0"[p](void 0,0)[g]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,n){var s=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,s,n):b.call(String(s),a,n)},function(t,e){var n=d(b,t,this,e,b!==a);if(n.done)return n.value;var o=s(t),m=String(this),p=i(o,RegExp),g=o.unicode,f=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(v?"y":"g"),C=new p(v?o:"^(?:"+o.source+")",f),_=void 0===e?h:e>>>0;if(0===_)return[];if(0===m.length)return null===c(C,m)?[m]:[];var x=0,y=0,w=[];while(y<m.length){C.lastIndex=v?y:0;var P,k=c(C,v?m:m.slice(y));if(null===k||(P=u(l(C.lastIndex+(v?0:y)),m.length))===x)y=r(m,y,g);else{if(w.push(m.slice(x,y)),w.length===_)return w;for(var $=1;$<=k.length-1;$++)if(w.push(k[$]),w.length===_)return w;y=x=P}}return w.push(m.slice(x)),w}]}))},"2fd4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination d-flex justify-content-center justify-content-md-end"},[a("li",{staticClass:"page-item",class:{"disabled not-allowed":!t.pagination.has_pre}},[a("a",{staticClass:"page-link px-3",class:{"disabled not-allowed":!t.pagination.has_pre},attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return t.getPage(t.pagination.current_page-1)}}},[a("span",{class:{"text-secondary":!t.pagination.has_next},attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"material-icons material-icons-middle pt-1"},[t._v("chevron_left")])]),a("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pagination.current_page===e},on:{click:function(a){return t.getPage(e)}}},[a("a",{staticClass:"page-link px-3",attrs:{href:"#"}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{"disabled not-allowed":!t.pagination.has_next}},[a("a",{staticClass:"page-link px-3 align-middle",class:{"disabled not-allowed":t.pagination.has_next},attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.getPage(t.pagination.current_page+1)}}},[t._m(0),a("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"material-icons material-icons-middle pt-1"},[t._v("chevron_right")])])}],i={name:"Pagination",props:{pagination:{type:Object,required:!0}},methods:{getPage:function(t){this.$emit("getPage",t)}}},r=i,l=a("2877"),c=Object(l["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},"5d72":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-success btn-block py-3 mt-0 align-items-center justify-content-center rounded-0"},[a("span",{staticClass:"font-weight-bold"},[t._v("加入購物")])])}],i={name:"AddToCartButton"},r=i,l=a("2877"),c=Object(l["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},"5fa6":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-5 discount-banner d-flex align-items-center"})},s=[],i={name:"DiscountBanner"},r=i,l=a("2877"),c=Object(l["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},"60a4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid px-0"},["all"===t.currentCategory?a("DiscountBanner"):t._e(),a("div",{staticClass:"container pb-5",class:{"mt-5":"all"!==t.currentCategory}},[a("div",{staticClass:"modal fade bd-example-modal-lg",attrs:{id:"addCartModal",tabindex:"-1",role:"dialog","aria-labelledby":"addCartModalTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content rounded-0 modal-bg-blur"},[a("div",{staticClass:"modal-body my-0 my-lg-3"},[a("div",{staticClass:"d-flex flex-column flex-lg-row rounded-0 align-items-between"},[a("div",{staticClass:"col-lg-6"},[t._m(0),a("div",{staticClass:"card-img my-3 my-lg-0"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"col-6 col-md-12 pl-0 pl-md-3"},[a("img",{staticClass:"card-img-top rounded-0 img-fluid",attrs:{alt:"",src:t.currentProduct.imageUrl}})]),a("div",{staticClass:"d-flex flex-column d-md-none"},[a("div",[t.currentProduct.title?a("h4",{staticClass:"h6"},[t._v("\n                          "+t._s(t.currentProduct.title.trim().split("/")[0])+"\n                        ")]):t._e(),t.currentProduct.title?a("h4",{staticClass:"card-title mb-0 font-weight-bold h5 mb-3"},[t._v("\n                          "+t._s(t.currentProduct.title.trim().split("/")[1])+"\n                        ")]):t._e()]),a("del",{staticClass:"small mb-1 card-text mb-0 mr-2 font-weight-bold text-secondary mr-4"},[t._v("\n                        NT$"+t._s(t.currentProduct.origin_price)+"\n                      ")]),a("p",{staticClass:"card-text text-success mb-0 h5 font-weight-bold"},[t._v("\n                        NT$"+t._s(t.currentProduct.price)+"\n                      ")])])])])]),a("div",{staticClass:"col-lg-6  pb-5 pb-lg-0"},[a("div",{staticClass:"card-body px-0 py-0 d-flex flex-column align-items-start justify-content-start h-100"},[a("div",{staticClass:"d-none d-md-flex justify-content-between w-100 align-items-start"},[a("div",[t.currentProduct.title?a("h4",{staticClass:"h6"},[t._v("\n                        "+t._s(t.currentProduct.title.trim().split("/")[0])+"\n                      ")]):t._e(),t.currentProduct.title?a("h4",{staticClass:"card-title mb-0 font-weight-bold h4"},[t._v("\n                        "+t._s(t.currentProduct.title.trim().split("/")[1])+"\n                      ")]):t._e()]),t._m(1)]),a("div",{staticClass:"d-none d-md-flex justify-content-between align-items-center mt-3"},[a("del",{staticClass:"card-text mb-0 mr-2 font-weight-bold text-secondary mr-4"},[t._v("\n                      NT$"+t._s(t.currentProduct.origin_price)+"\n                    ")]),a("p",{staticClass:"card-text text-success mb-0 "},[t._v("\n                      NT$"+t._s(t.currentProduct.price)+"\n                    ")])]),a("div",{staticClass:"d-flex flex-column flex-md-row  justify-content-between align-items-end w-100 mt-auto"},[a("div",{staticClass:"btn-group mr-md-3 mt-3 text-center mb-3 mb-md-0 w-100",attrs:{role:"group","aria-label":"Basic example"}},[a("button",{staticClass:"btn btn-outline-dark py-3 px-2 rounded-0",class:{"disabled button-secondary":1===t.num},staticStyle:{width:"25%"},attrs:{type:"button",disabled:1===t.num},on:{click:function(e){return t.numberHandler(-1)}}},[t._v("\n                        -\n                      ")]),a("button",{staticClass:"btn btn-outline-dark py-3 text-center",staticStyle:{width:"50%"},attrs:{type:"button"}},[a("span",{staticClass:"text-center"},[t._v(t._s(t.num))])]),a("button",{staticClass:"btn btn-outline-dark py-3 px-2 rounded-0",class:{"disabled button-secondary":t.num===t.total},staticStyle:{width:"25%"},attrs:{type:"button",disabled:t.num===t.total},on:{click:function(e){return t.numberHandler(1)}}},[t._v("\n                        +\n                      ")])]),a("AddToCartButton",{nativeOn:{click:function(e){return t.addToCart(t.currentProduct.id,t.num)}}})],1)])])])])])])]),a("div",{staticClass:"font-weight-bold font-weight-bold h6 d-flex"},[a("span",[t._v("專輯分類")]),"all"!==t.currentCategory?a("span",{staticClass:"d-flex d-md-none mr-3"},[t._v("  / "+t._s(t.currentCategory))]):t._e()]),a("hr"),a("div",{staticClass:"row mt-2 mt-md-5"},[a("div",{staticClass:"col-md-2 overflow-x py-1"},[a("div",{staticClass:"nav d-flex flex-nowrap flex-md-column nav-pills ",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},[a("div",{staticClass:"col-md-12 pl-0"},[a("router-link",{staticClass:"nav-link  text-left mb-md-3 d-flex justify-content-center justify-content-md-start",class:{active:"all"===t.currentCategory},attrs:{to:{name:"shopping_List",params:{category:"all",page:1}},"aria-selected":"true",href:"#"}},[t._v("\n              All\n            ")])],1),t._l(t.categories,(function(e){return a("div",{key:e,staticClass:"col-md-12 pl-0"},[a("router-link",{staticClass:" nav-link  text-left mb-md-3 d-flex justify-content-center justify-content-md-start",class:{active:t.currentCategory===e},attrs:{to:{name:"shopping_List",params:{category:e,page:1}},"aria-selected":"true",href:"#"}},[t._v("\n              "+t._s(e)+"\n            ")])],1)}))],2)]),a("div",{staticClass:"col-md-10 mb-5 pb-5 min-height "},[a("hr",{staticClass:"d-block d-md-none"}),a("div",{staticClass:"row mt-5 mt-md-0",class:{"slide-fade-enter":t.isChange,"slide-fade-enter-active":!t.isChange}},[0===t.filterProducts.length?a("h3",{staticClass:"text-secondary display-5 px-3"},[t._v("\n            即將公開，敬請期待！"),a("br"),a("span",{staticClass:"h5"},[t._v("Coming soon,stay tuned! d(`･∀･)b")])]):t._l(t.filterProducts,(function(e){return a("div",{key:e.title,staticClass:"col-6 col-md-4 col-md-4"},[a("ShoppingCardListItem",{attrs:{product:e},on:{selectProduct:t.selectProduct}},[a("template",{slot:"openModal"},[a("AddToCartButton",{staticClass:"d-none d-md-flex",nativeOn:{click:function(a){return a.stopPropagation(),t.openModal(e)}}})],1),a("template",{slot:"openModalIcon"},[a("span",{staticClass:"material-icons material-icons-outlined material-icons-middle ml-2 pb-1 d-flex d-md-none",on:{click:function(a){return t.openModal(e)}}},[t._v("shopping_cart")])])],2)],1)}))],2)])]),"all"===t.currentCategory?a("Pagination",{attrs:{pagination:t.pagination},on:{getPage:t.getProducts}}):t._e()],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close align-self-end d-flex d-lg-none",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{staticClass:"display-4",attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close align-self-end d-none d-lg-block",staticStyle:{transform:"translateY(-25px)"},attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{staticClass:"display-4",attrs:{"aria-hidden":"true"}},[t._v("×")])])}],i=a("4ec3"),r=a("70e0"),l=a("5d72"),c=a("2fd4"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card mb-5 rounded-0"},[a("div",{staticClass:"card-img",on:{click:function(e){return e.preventDefault(),t.selectProduct(t.product.id,t.product.category)}}},[a("img",{staticClass:"img-object-fit rounded-0",attrs:{alt:"",src:t.product.imageUrl}}),t._t("openModal")],2),a("div",{staticClass:"card-body px-0 pb-0"},[a("div",{staticClass:"d-flex flex-column align-items-center",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.preventDefault(),t.selectProduct(t.product.id,t.product.category)}}},[a("p",{staticClass:"mb-0"},[t._v("\n        "+t._s(t.singer)+"\n      ")]),a("div",{staticClass:"card-title mb-0 font-weight-bold h5"},[t._v("\n        "+t._s(t.album)+"\n      ")])]),a("div",{staticClass:"d-flex text-center pb-3 mt-3 align-items-end"},[a("div",{staticClass:"d-flex flex-column align-items-start align-items-md-center flex-md-row justify-content-center w-100"},[a("del",{staticClass:"card-text mb-0 text-muted font-weight-bold mr-3 d-none d-md-flex"},[t._v("NT$"+t._s(t.product.origin_price))]),a("del",{staticClass:"card-text mb-0 text-muted font-weight-bold mr-3 small d-flex d-md-none"},[t._v("NT$"+t._s(t.product.origin_price))]),a("div",{staticClass:"card-text text-success"},[t._v("\n          NT$"+t._s(t.product.price)+"\n        ")])]),t._t("openModalIcon")],2)])])},d=[],u=(a("28a5"),{name:"ShoppingCardListItem",props:{product:{type:Object,required:!0}},computed:{singer:function(){return this.product.title?this.product.title.trim().split("/")[0]:""},album:function(){return this.product.title?this.product.title.trim().split("/")[1]:""}},methods:{selectProduct:function(t){t.id,t.category;this.$emit("selectProduct",this.product)}}}),m=u,p=a("2877"),g=Object(p["a"])(m,o,d,!1,null,null,null),f=g.exports,h=a("5fa6"),v=a("1157"),b=a.n(v),C={name:"ShoppingCardList",components:{Pagination:c["a"],ShoppingCardListItem:f,AddToCartButton:l["a"],DiscountBanner:h["a"]},data:function(){return{products:[],pagination:{},isChange:!1,allProducts:[],currentProduct:{},num:1,total:10}},computed:{currentCategory:function(){return this.$route.params.category},filterProducts:function(){var t=this;if("all"===this.currentCategory)return this.products.filter((function(t){return t.is_enabled}));var e=this.allProducts.filter((function(e){return e.category===t.currentCategory}));return e.filter((function(t){return t.is_enabled}))},isLoading:function(){return this.$store.state.loading.isLoading},categories:function(){return this.$store.getters.categories}},watch:{currentCategory:function(t,e){var a=this;t&&(this.isChange=!0,setTimeout((function(){a.isChange=!1}),500))}},created:function(){b()(".modal-backdrop").remove(),b()(document.body).removeClass("modal-open"),this.getProducts(),this.getShoppingListAll()},methods:{numberHandler:function(t){this.num=this.num+t+this.total%this.total},openModal:function(t){b()("#addCartModal").modal("show"),this.currentProduct=t,this.num=1},getShoppingListAll:function(){var t=this;Object(i["s"])().then((function(e){e.data.success&&e.data.products&&(t.allProducts=e.data.products?e.data.products:[])}))},getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$store.commit("loading/loading_status",!0),Object(i["r"])(e).then((function(a){a.data.success?(t.products=a.data.products,t.pagination=a.data.pagination,t.$router.push({name:"shopping_List",params:{category:t.$route.params.category,page:e}}),t.$store.commit("loading/loading_status",!1)):r["a"].emitHandler(!1,"取得商品失敗")})).catch((function(t){(t||t instanceof ReferenceError)&&r["a"].emitHandler(!1,"取得資料錯誤")}))},selectProduct:function(t){var e=t.id,a=t.category;this.$router.push({name:"shopping_product",params:{category:a,id:e}})},addToCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("cart/ADD_TO_CART",{id:t,qty:e}),b()("#addCartModal").modal("hide")}}},_=C,x=Object(p["a"])(_,n,s,!1,null,null,null);e["default"]=x.exports}}]);
//# sourceMappingURL=ShoppingCardList.14db7cb5.js.map